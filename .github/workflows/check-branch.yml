name: Master Guard

on:
  pull_request:
    branches:
      - master

jobs:
  check-master-source:
    runs-on: ubuntu-latest
    steps:
      - name: Verify master source
        run: |
          BASE="${{ github.base_ref }}"
          HEAD="${{ github.head_ref }}"
          
          echo "Target branch: $BASE"
          echo "Source branch: $HEAD"
          
          if [[ "$BASE" == "master" && "$HEAD" != "develop" ]]; then
            echo "에러: master는 무조건 develop에서만 머지해라. 딴 데서 기어오지 말고."
            exit 1
          fi
          
          echo "결과: develop에서 온 거 확인됨. 통과."
